{% extends 'base.html' %}
{% load static %}

{% block title %}
{{ category }} 글 작성
{% endblock %}

{% block extra %}
<link rel="stylesheet" type="text/css" href='{% static "board/style.css" %}'>
<script>
	{% if not request.user.is_authenticated %}
	alert('로그인 후에 작성 가능합니다.')
	window.location='/'
	{% endif %}
</script>
{% endblock %}

{% block body %}
<form class="form-horizontal write" action="write" method="POST">
	{% csrf_token %}
	<div class="form-group">
		<label for="inputCategory" class="col-sm-2 control-label">카테고리</label>
		<div class="col-sm-10">
			{{ form.category }}
		</div>
	</div>
	<div class="form-group">
		<label for="inputTitle" class="col-sm-2 control-label">제목</label>
		<div class="col-sm-10">
			{{ form.title }}
		</div>
	</div>
	<div class="form-group">
		<label for="inputAuthor" class="col-sm-2 control-label">작성자</label>
		<div class="col-sm-10">
			{{ form.author }}
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-offset-2 col-sm-10">
			{{ form.body }}
		</div>
	</div>
	<input class="btn btn-default write-btn" type="submit" value="작성" />
</form>
{% endblock %}

{% block script %}
<script>
	$(document).ready(function() {
		var category = $("#id_category"),
			author = $("#id_author");
		category.val('{{ category }}');
		category.prop('readonly', true);
		author.val('{{ request.user }}');
		author.prop('readonly', true);
	});
</script>
{% endblock %}
